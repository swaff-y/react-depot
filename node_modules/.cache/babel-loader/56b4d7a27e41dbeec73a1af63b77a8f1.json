{"ast":null,"code":"var _jsxFileName = \"/Users/kyleswaffield/sei/projects/react-depot/app/javascript/components/App.jsx\",\n    _this = this;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Products from \"./Products\";\nimport Navbar from \"./Navbar\";\nimport { DefaultData } from \"./DefaultData\";\n\nvar App = function App() {\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      change = _useState2[0],\n      setChange = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      smallCart = _useState4[0],\n      setSmallCart = _useState4[1];\n\n  var _useState5 = useState(JSON.stringify(DefaultData)),\n      _useState6 = _slicedToArray(_useState5, 2),\n      data = _useState6[0],\n      setData = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      totalCalc = _useState8[0],\n      setTotalCalc = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      products = _useState10[0],\n      setProducts = _useState10[1];\n\n  var _useState11 = useState(true),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loadingData = _useState12[0],\n      setLoadingData = _useState12[1];\n\n  var _useState13 = useState(true),\n      _useState14 = _slicedToArray(_useState13, 2),\n      loadingTotal = _useState14[0],\n      setLoadingTotal = _useState14[1];\n\n  var _useState15 = useState(true),\n      _useState16 = _slicedToArray(_useState15, 2),\n      loadingProducts = _useState16[0],\n      setLoadingProducts = _useState16[1]; //fecth last cart\n\n\n  useEffect(function () {\n    var url = \"/carts/last\";\n    fetch(url).then(function (res) {\n      if (res.ok) {\n        return res.json();\n      }\n\n      return DefaultData;\n    }).then(function (json) {\n      if (json.id === 0) {\n        setSmallCart(0);\n        console.log(json.id);\n      } else {\n        setSmallCart(json.length);\n        console.log(\"small cart: \", json);\n      }\n\n      setData(JSON.stringify(json));\n      setLoadingData(false);\n    });\n  }, [change]); //fecth totals\n\n  useEffect(function () {\n    var url = \"/carts/last/total\";\n    fetch(url).then(function (res) {\n      if (res.ok) {\n        return res.json();\n      }\n\n      return 0;\n    }).then(function (json) {\n      setTotalCalc(json);\n      setLoadingTotal(false);\n    });\n  }, [change]); //fetch products\n\n  useEffect(function () {\n    var url = \"/products\";\n    fetch(url).then(function (res) {\n      return res.json();\n    }).then(function (json) {\n      setProducts(JSON.stringify(json));\n      setLoadingProducts(false); // console.log(\"products run\");\n    });\n  }, [products]);\n\n  function handleChange() {\n    console.log(\"change clicked: \");\n    setChange(function (prevChange) {\n      return prevChange + 1;\n    });\n  }\n\n  function clearState() {\n    console.log(\"empty clicked\"); // setLoadingData(true);\n    // setLoadingTotal(true);\n\n    if (JSON.parse(data).id === 0) {\n      setSmallCart(0);\n      console.log(\"small cart clear: \", JSON.parse(data).id);\n    } else {\n      setSmallCart(JSON.parse(data).length);\n      console.log(\"small cart clear: \", JSON.parse(data));\n    }\n\n    setChange(function (prevChange) {\n      return prevChange + 1;\n    });\n  }\n\n  ; // console.log('app data', data);\n  // console.log('app total', totalCalc);\n  // console.log('app change', change);\n\n  var loading = true;\n\n  if (loadingTotal === false && loadingData === false) {\n    loading = false; //  setSmallCart(JSON.parse(data).length);\n  } // console.log(\"check:\", products);\n\n\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 18\n    }\n  }, \"Loading.....\") : /*#__PURE__*/React.createElement(Navbar, {\n    changeNav: change,\n    dataNav: data,\n    totalNav: totalCalc,\n    smallCartNav: smallCart,\n    clearState: clearState,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 44\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    exact: true,\n    component: Home,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }), loadingProducts ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(Route, {\n    path: \"/products\",\n    render: function render(props) {\n      return /*#__PURE__*/React.createElement(Products, Object.assign({}, props, {\n        handleChange: handleChange,\n        productsApp: products,\n        loadingApp: loadingProducts,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 95\n        }\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 53\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/kyleswaffield/sei/projects/react-depot/app/javascript/components/App.jsx"],"names":["React","useState","useEffect","BrowserRouter","Router","Switch","Route","Home","Products","Navbar","DefaultData","App","change","setChange","smallCart","setSmallCart","JSON","stringify","data","setData","totalCalc","setTotalCalc","products","setProducts","loadingData","setLoadingData","loadingTotal","setLoadingTotal","loadingProducts","setLoadingProducts","url","fetch","then","res","ok","json","id","console","log","length","handleChange","prevChange","clearState","parse","loading","props"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAASC,aAAa,IAAIC,MAA1B,EAAkCC,MAAlC,EAA0CC,KAA1C,QAAuD,kBAAvD;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,WAAT,QAA4B,eAA5B;;AAEA,IAAMC,GAAG,GAAG,SAANA,GAAM,GAAM;AAAA,kBACYV,QAAQ,CAAC,CAAD,CADpB;AAAA;AAAA,MACTW,MADS;AAAA,MACDC,SADC;;AAAA,mBAEkBZ,QAAQ,CAAC,CAAD,CAF1B;AAAA;AAAA,MAETa,SAFS;AAAA,MAEEC,YAFF;;AAAA,mBAGQd,QAAQ,CAACe,IAAI,CAACC,SAAL,CAAeP,WAAf,CAAD,CAHhB;AAAA;AAAA,MAGTQ,IAHS;AAAA,MAGHC,OAHG;;AAAA,mBAIkBlB,QAAQ,CAAC,CAAD,CAJ1B;AAAA;AAAA,MAITmB,SAJS;AAAA,MAIEC,YAJF;;AAAA,mBAKgBpB,QAAQ,CAAC,EAAD,CALxB;AAAA;AAAA,MAKTqB,QALS;AAAA,MAKCC,WALD;;AAAA,oBAMsBtB,QAAQ,CAAC,IAAD,CAN9B;AAAA;AAAA,MAMTuB,WANS;AAAA,MAMIC,cANJ;;AAAA,oBAOwBxB,QAAQ,CAAC,IAAD,CAPhC;AAAA;AAAA,MAOTyB,YAPS;AAAA,MAOKC,eAPL;;AAAA,oBAQ8B1B,QAAQ,CAAC,IAAD,CARtC;AAAA;AAAA,MAQT2B,eARS;AAAA,MAQQC,kBARR,mBAUlB;;;AACE3B,EAAAA,SAAS,CAAE,YAAM;AACf,QAAM4B,GAAG,GAAG,aAAZ;AACAC,IAAAA,KAAK,CAACD,GAAD,CAAL,CACCE,IADD,CACM,UAAAC,GAAG,EAAI;AACX,UAAGA,GAAG,CAACC,EAAP,EAAU;AACR,eAAOD,GAAG,CAACE,IAAJ,EAAP;AACD;;AACD,aAAOzB,WAAP;AACD,KAND,EAOCsB,IAPD,CAOM,UAAAG,IAAI,EAAI;AACZ,UAAGA,IAAI,CAACC,EAAL,KAAY,CAAf,EAAiB;AACfrB,QAAAA,YAAY,CAAC,CAAD,CAAZ;AACAsB,QAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,EAAjB;AACD,OAHD,MAGK;AACHrB,QAAAA,YAAY,CAACoB,IAAI,CAACI,MAAN,CAAZ;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BH,IAA5B;AACD;;AACDhB,MAAAA,OAAO,CAACH,IAAI,CAACC,SAAL,CAAekB,IAAf,CAAD,CAAP;AACAV,MAAAA,cAAc,CAAC,KAAD,CAAd;AACD,KAjBD;AAkBD,GApBQ,EAoBP,CAACb,MAAD,CApBO,CAAT,CAXgB,CAgClB;;AACEV,EAAAA,SAAS,CAAE,YAAM;AACf,QAAM4B,GAAG,GAAG,mBAAZ;AACAC,IAAAA,KAAK,CAACD,GAAD,CAAL,CACCE,IADD,CACM,UAAAC,GAAG,EAAI;AACX,UAAGA,GAAG,CAACC,EAAP,EAAU;AACR,eAAOD,GAAG,CAACE,IAAJ,EAAP;AACD;;AACD,aAAO,CAAP;AACD,KAND,EAOCH,IAPD,CAOM,UAAAG,IAAI,EAAI;AACZd,MAAAA,YAAY,CAACc,IAAD,CAAZ;AACAR,MAAAA,eAAe,CAAC,KAAD,CAAf;AACD,KAVD;AAWD,GAbQ,EAaP,CAACf,MAAD,CAbO,CAAT,CAjCgB,CA+ClB;;AACEV,EAAAA,SAAS,CAAC,YAAI;AACZ,QAAM4B,GAAG,GAAG,WAAZ;AACAC,IAAAA,KAAK,CAACD,GAAD,CAAL,CACGE,IADH,CACQ,UAAAC,GAAG,EAAI;AACT,aAAOA,GAAG,CAACE,IAAJ,EAAP;AACH,KAHH,EAIGH,IAJH,CAIQ,UAAAG,IAAI,EAAI;AACZZ,MAAAA,WAAW,CAACP,IAAI,CAACC,SAAL,CAAekB,IAAf,CAAD,CAAX;AACAN,MAAAA,kBAAkB,CAAC,KAAD,CAAlB,CAFY,CAGZ;AACD,KARH;AASD,GAXQ,EAWP,CAACP,QAAD,CAXO,CAAT;;AAaA,WAASkB,YAAT,GAAuB;AACrBH,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAzB,IAAAA,SAAS,CAAC,UAAA4B,UAAU,EAAG;AACrB,aAAOA,UAAU,GAAG,CAApB;AACD,KAFQ,CAAT;AAGD;;AAED,WAASC,UAAT,GAAqB;AACnBL,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EADmB,CAEnB;AACA;;AACA,QAAGtB,IAAI,CAAC2B,KAAL,CAAWzB,IAAX,EAAiBkB,EAAjB,KAAwB,CAA3B,EAA6B;AAC3BrB,MAAAA,YAAY,CAAC,CAAD,CAAZ;AACAsB,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCtB,IAAI,CAAC2B,KAAL,CAAWzB,IAAX,EAAiBkB,EAAnD;AACD,KAHD,MAGK;AACHrB,MAAAA,YAAY,CAACC,IAAI,CAAC2B,KAAL,CAAWzB,IAAX,EAAiBqB,MAAlB,CAAZ;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCtB,IAAI,CAAC2B,KAAL,CAAWzB,IAAX,CAAlC;AACD;;AACDL,IAAAA,SAAS,CAAC,UAAA4B,UAAU,EAAG;AACrB,aAAOA,UAAU,GAAG,CAApB;AACD,KAFQ,CAAT;AAGD;;AAAA,GAlFe,CAoFhB;AACA;AACA;;AACA,MAAIG,OAAO,GAAG,IAAd;;AACA,MAAGlB,YAAY,KAAK,KAAjB,IAA0BF,WAAW,KAAK,KAA7C,EAAmD;AACjDoB,IAAAA,OAAO,GAAG,KAAV,CADiD,CAEnD;AACC,GA3Fe,CA8FhB;;;AACA,sBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,OAAO,gBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAH,gBAA6B,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAEhC,MAAnB;AAA2B,IAAA,OAAO,EAAEM,IAApC;AAA0C,IAAA,QAAQ,EAAEE,SAApD;AAA+D,IAAA,YAAY,EAAEN,SAA7E;AAAwF,IAAA,UAAU,EAAE4B,UAApG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADvC,eAGE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,GAAZ;AAAgB,IAAA,KAAK,MAArB;AAAsB,IAAA,SAAS,EAAEnC,IAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAGIqB,eAAe,gBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAH,gBAA2B,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,WAAZ;AAAwB,IAAA,MAAM,EAAE,gBAACiB,KAAD;AAAA,0BAAU,oBAAC,QAAD,oBAAcA,KAAd;AAAqB,QAAA,YAAY,EAAEL,YAAnC;AAAiD,QAAA,WAAW,EAAElB,QAA9D;AAAwE,QAAA,UAAU,EAAEM,eAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAV;AAAA,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAH9C,CAHF,CADF;AAYD,CA3GD;;AA6GA,eAAejB,GAAf","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Products from \"./Products\";\nimport Navbar from \"./Navbar\";\nimport { DefaultData } from \"./DefaultData\";\n\nconst App = () => {\n  const [change, setChange] = useState(0);\n  const [smallCart, setSmallCart] = useState(0);\n  const [data, setData] = useState(JSON.stringify(DefaultData));\n  const [totalCalc, setTotalCalc] = useState(0);\n  const [products, setProducts] = useState([]);\n  const [loadingData, setLoadingData] = useState(true);\n  const [loadingTotal, setLoadingTotal] = useState(true);\n  const [loadingProducts, setLoadingProducts] = useState(true);\n\n//fecth last cart\n  useEffect( () => {\n    const url = \"/carts/last\";\n    fetch(url)\n    .then(res => {\n      if(res.ok){\n        return res.json()\n      }\n      return DefaultData\n    })\n    .then(json => {\n      if(json.id === 0){\n        setSmallCart(0);\n        console.log(json.id);\n      }else{\n        setSmallCart(json.length);\n        console.log(\"small cart: \", json);\n      }\n      setData(JSON.stringify(json));\n      setLoadingData(false);\n    })\n  },[change])\n//fecth totals\n  useEffect( () => {\n    const url = \"/carts/last/total\";\n    fetch(url)\n    .then(res => {\n      if(res.ok){\n        return res.json()\n      }\n      return 0\n    })\n    .then(json => {\n      setTotalCalc(json);\n      setLoadingTotal(false);\n    })\n  },[change])\n//fetch products\n  useEffect(()=>{\n    const url = \"/products\";\n    fetch(url)\n      .then(res => {\n          return res.json();\n      })\n      .then(json => {\n        setProducts(JSON.stringify(json));\n        setLoadingProducts(false);\n        // console.log(\"products run\");\n      })\n  },[products])\n\n  function handleChange(){\n    console.log(\"change clicked: \");\n    setChange(prevChange =>{\n      return prevChange + 1;\n    });\n  }\n\n  function clearState(){\n    console.log(\"empty clicked\");\n    // setLoadingData(true);\n    // setLoadingTotal(true);\n    if(JSON.parse(data).id === 0){\n      setSmallCart(0);\n      console.log(\"small cart clear: \", JSON.parse(data).id);\n    }else{\n      setSmallCart(JSON.parse(data).length);\n      console.log(\"small cart clear: \", JSON.parse(data));\n    }\n    setChange(prevChange =>{\n      return prevChange + 1;\n    });\n  };\n\n  // console.log('app data', data);\n  // console.log('app total', totalCalc);\n  // console.log('app change', change);\n  let loading = true;\n  if(loadingTotal === false && loadingData === false){\n    loading = false;\n  //  setSmallCart(JSON.parse(data).length);\n  }\n\n\n  // console.log(\"check:\", products);\n  return(\n    <Router>\n      {loading ? <div>Loading.....</div> : <Navbar changeNav={change} dataNav={data} totalNav={totalCalc} smallCartNav={smallCart} clearState={clearState}/>}\n\n      <Switch>\n        <Route path=\"/\" exact component={Home} />\n        {\n          loadingProducts ? <div>Loading...</div> : <Route path=\"/products\" render={(props)=>(<Products {...props} handleChange={handleChange} productsApp={products} loadingApp={loadingProducts}/>)} />\n        }\n      </Switch>\n    </Router>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}