{"ast":null,"code":"var _jsxFileName = \"/Users/kyleswaffield/sei/projects/react-depot/app/javascript/components/App.jsx\",\n    _this = this;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Products from \"./Products\";\nimport View from \"./View\";\nimport Navbar from \"./Navbar\";\nimport { DefaultData } from \"./DefaultData\";\n\nvar App = function App() {\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      change = _useState2[0],\n      setChange = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      smallCart = _useState4[0],\n      setSmallCart = _useState4[1];\n\n  var _useState5 = useState(JSON.stringify(DefaultData)),\n      _useState6 = _slicedToArray(_useState5, 2),\n      data = _useState6[0],\n      setData = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      totalCalc = _useState8[0],\n      setTotalCalc = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      products = _useState10[0],\n      setProducts = _useState10[1];\n\n  var _useState11 = useState(true),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loadingData = _useState12[0],\n      setLoadingData = _useState12[1];\n\n  var _useState13 = useState(true),\n      _useState14 = _slicedToArray(_useState13, 2),\n      loadingTotal = _useState14[0],\n      setLoadingTotal = _useState14[1];\n\n  var _useState15 = useState(true),\n      _useState16 = _slicedToArray(_useState15, 2),\n      loadingProducts = _useState16[0],\n      setLoadingProducts = _useState16[1];\n\n  var _useState17 = useState(0),\n      _useState18 = _slicedToArray(_useState17, 2),\n      productId = _useState18[0],\n      setProductId = _useState18[1]; //fecth last cart\n\n\n  useEffect(function () {\n    var url = \"/carts/last\";\n    fetch(url).then(function (res) {\n      if (res.ok) {\n        return res.json();\n      }\n\n      return DefaultData;\n    }).then(function (json) {\n      if (json[0].id === 0) {\n        setSmallCart(0);\n        console.log(json[0].id);\n      } else {\n        setSmallCart(json.length);\n        console.log(\"small cart: \", json, json[0].id, json.length);\n      }\n\n      setData(JSON.stringify(json));\n      setLoadingData(false);\n    });\n  }, [change]); //fecth totals\n\n  useEffect(function () {\n    var url = \"/carts/last/total\";\n    fetch(url).then(function (res) {\n      if (res.ok) {\n        return res.json();\n      }\n\n      return 0;\n    }).then(function (json) {\n      setTotalCalc(json);\n      setLoadingTotal(false);\n    });\n  }, [change]); //fetch products\n\n  useEffect(function () {\n    var url = \"/products\";\n    fetch(url).then(function (res) {\n      return res.json();\n    }).then(function (json) {\n      setProducts(JSON.stringify(json));\n      setLoadingProducts(false);\n    });\n  }, [products]); //handles all state change by incrementing change\n\n  function handleChange() {\n    setChange(function (prevChange) {\n      return prevChange + 1;\n    });\n  } //clears state after empting cart\n\n\n  function clearState() {\n    console.log(\"empty clicked\");\n    setSmallCart(0);\n    setChange(function (prevChange) {\n      return prevChange + 1;\n    });\n  }\n\n  ; //checks if API's are loaded before proceeding\n\n  var loading = true;\n\n  if (loadingTotal === false && loadingData === false) {\n    loading = false; //  setSmallCart(JSON.parse(data).length);\n  }\n\n  var establishProductId = function establishProductId(id) {\n    setProductId(id);\n    console.log(\"product id: -> \", id);\n  };\n\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 18\n    }\n  }, \"Loading.....\") : /*#__PURE__*/React.createElement(Navbar, {\n    changeNav: change,\n    dataNav: data,\n    totalNav: totalCalc,\n    smallCartNav: smallCart,\n    clearState: clearState,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 44\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    exact: true,\n    component: Home,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }), loadingProducts ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(Route, {\n    path: \"/products\",\n    render: function render(props) {\n      return /*#__PURE__*/React.createElement(Products, Object.assign({}, props, {\n        handleChange: handleChange,\n        productsApp: products,\n        loadingApp: loadingProducts,\n        establishProductId: establishProductId,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 95\n        }\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 53\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/product/view\",\n    render: function render(props) {\n      return /*#__PURE__*/React.createElement(View, Object.assign({}, props, {\n        productIdApp: productId,\n        handleChange: handleChange,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 55\n        }\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/order/new\",\n    render: function render(props) {\n      return /*#__PURE__*/React.createElement(NewOrder, Object.assign({}, props, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 52\n        }\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/kyleswaffield/sei/projects/react-depot/app/javascript/components/App.jsx"],"names":["React","useState","useEffect","BrowserRouter","Router","Switch","Route","Home","Products","View","Navbar","DefaultData","App","change","setChange","smallCart","setSmallCart","JSON","stringify","data","setData","totalCalc","setTotalCalc","products","setProducts","loadingData","setLoadingData","loadingTotal","setLoadingTotal","loadingProducts","setLoadingProducts","productId","setProductId","url","fetch","then","res","ok","json","id","console","log","length","handleChange","prevChange","clearState","loading","establishProductId","props"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Products from \"./Products\";\nimport View from \"./View\";\nimport Navbar from \"./Navbar\";\nimport { DefaultData } from \"./DefaultData\";\n\nconst App = () => {\n  const [change, setChange] = useState(0);\n  const [smallCart, setSmallCart] = useState(0);\n  const [data, setData] = useState(JSON.stringify(DefaultData));\n  const [totalCalc, setTotalCalc] = useState(0);\n  const [products, setProducts] = useState([]);\n  const [loadingData, setLoadingData] = useState(true);\n  const [loadingTotal, setLoadingTotal] = useState(true);\n  const [loadingProducts, setLoadingProducts] = useState(true);\n  const [productId, setProductId] = useState(0);\n\n//fecth last cart\n  useEffect( () => {\n    const url = \"/carts/last\";\n    fetch(url)\n    .then(res => {\n      if(res.ok){\n        return res.json()\n      }\n      return DefaultData\n    })\n    .then(json => {\n      if(json[0].id === 0){\n        setSmallCart(0);\n        console.log(json[0].id);\n      }else{\n        setSmallCart(json.length);\n        console.log(\"small cart: \", json, json[0].id, json.length);\n      }\n      setData(JSON.stringify(json));\n      setLoadingData(false);\n    })\n  },[change])\n//fecth totals\n  useEffect( () => {\n    const url = \"/carts/last/total\";\n    fetch(url)\n    .then(res => {\n      if(res.ok){\n        return res.json()\n      }\n      return 0\n    })\n    .then(json => {\n      setTotalCalc(json);\n      setLoadingTotal(false);\n    })\n  },[change])\n//fetch products\n  useEffect(()=>{\n    const url = \"/products\";\n    fetch(url)\n      .then(res => {\n          return res.json();\n      })\n      .then(json => {\n        setProducts(JSON.stringify(json));\n        setLoadingProducts(false);\n      })\n  },[products])\n\n  //handles all state change by incrementing change\n  function handleChange(){\n    setChange(prevChange =>{\n      return prevChange + 1;\n    });\n  }\n  //clears state after empting cart\n  function clearState(){\n    console.log(\"empty clicked\");\n    setSmallCart(0);\n    setChange(prevChange =>{\n      return prevChange + 1;\n    });\n  };\n\n  //checks if API's are loaded before proceeding\n  let loading = true;\n  if(loadingTotal === false && loadingData === false){\n    loading = false;\n  //  setSmallCart(JSON.parse(data).length);\n  }\n\n  const establishProductId = (id) => {\n    setProductId(id)\n    console.log(\"product id: -> \", id);\n  }\n\n  return(\n    <Router>\n      {loading ? <div>Loading.....</div> : <Navbar changeNav={change} dataNav={data} totalNav={totalCalc} smallCartNav={smallCart} clearState={clearState}/>}\n\n      <Switch>\n        <Route path=\"/\" exact component={Home} />\n        {\n          loadingProducts ? <div>Loading...</div> : <Route path=\"/products\" render={(props)=>(<Products {...props} handleChange={handleChange} productsApp={products} loadingApp={loadingProducts} establishProductId={establishProductId}/>)} />\n        }\n        <Route path=\"/product/view\" render={(props)=>(<View {...props} productIdApp={productId} handleChange={handleChange}/>)}/>\n        <Route path=\"/order/new\" render={(props)=>(<NewOrder {...props} />)}/>\n      </Switch>\n    </Router>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}